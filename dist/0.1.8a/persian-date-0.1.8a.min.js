var GREGORIAN_EPOCH=1721425.5,PERSIAN_EPOCH=1948320.5,monthRange={1:{name:{fa:"فروردین"},abbr:{fa:"فرو"}},2:{name:{fa:"اردیبهشت"},abbr:{fa:"ارد"}},3:{name:{fa:"خرداد"},abbr:{fa:"خرد"}},4:{name:{fa:"تیر"},abbr:{fa:"تیر"}},5:{name:{fa:"مرداد"},abbr:{fa:"مرد"}},6:{name:{fa:"شهریور"},abbr:{fa:"شهر"}},7:{name:{fa:"مهر"},abbr:{fa:"مهر"}},8:{name:{fa:"آبان"},abbr:{fa:"آبا"}},9:{name:{fa:"آذر"},abbr:{fa:"آذر"}},10:{name:{fa:"دی"},abbr:{fa:"دی"}},11:{name:{fa:"بهمن"},abbr:{fa:"بهم"}},12:{name:{fa:"اسفند"},abbr:{fa:"اسف"}}},weekRange={1:{name:{fa:"شنبه"},abbr:{fa:"ش"}},2:{name:{fa:"یکشنبه"},abbr:{fa:"ی"}},3:{name:{fa:"دوشنبه"},abbr:{fa:"د"}},4:{name:{fa:"سه شنبه"},abbr:{fa:"س"}},5:{name:{fa:"چهار شنبه"},abbr:{fa:"چ"}},6:{name:{fa:"پنج شنبه"},abbr:{fa:"پ"}},0:{name:{fa:"جمعه"},abbr:{fa:"ج"}}},persianDaysName=["اورمزد","بهمن","اوردیبهشت","شهریور","سپندارمذ","خورداد","امرداد","دی به آذز","آذز","آبان","خورشید","ماه","تیر","گوش","دی به مهر","مهر","سروش","رشن","فروردین","بهرام","رام","باد","دی به دین","دین","ارد","اشتاد","آسمان","زامیاد","مانتره سپند","انارام","زیادی"];String.prototype.toPersianDigit=function(a){return this.replace(/\d+/g,function(f){var d=[],e=[],c,b;for(c=0;c<f.length;c+=1){d.push(f.charCodeAt(c))}for(b=0;b<d.length;b+=1){e.push(String.fromCharCode(d[b]+((!!a&&a===true)?1584:1728)))}return e.join("")})};function toPersianDigit(a){return a.toString().toPersianDigit()}function isArray(a){return Object.prototype.toString.call(a)==="[object Array]"}function isString(a){return typeof a==="string"?true:false}function isNumber(a){return typeof a==="number"?true:false}function isDate(a){return a instanceof Date}function isUndefined(a){if(typeof a==="undefined"){return true}else{return false}}function leftZeroFill(c,b){var a=c+"";while(a.length<b){a="0"+a}return a}function absRound(a){if(a<0){return Math.ceil(a)}else{return Math.floor(a)}}function mod(d,c){return d-(c*Math.floor(d/c))}function jwday(a){return mod(Math.floor((a+1.5)),7)}function isLeapGregorian(a){return((a%4)==0)&&(!(((a%100)===0)&&((a%400)!=0)))}function isLeapPersian(a){return((((((a-((a>0)?474:473))%2820)+474)+38)*682)%2816)<682}function gregorianToJd(b,c,a){return(GREGORIAN_EPOCH-1)+(365*(b-1))+Math.floor((b-1)/4)+(-Math.floor((b-1)/100))+Math.floor((b-1)/400)+Math.floor((((367*c)-362)/12)+((c<=2)?0:(isLeapGregorian(b)?-1:-2))+a)}function jdToGregorian(j){var g,m,e,b,l,a,n,c,f,k,h,d,i;g=Math.floor(j-0.5)+0.5;m=g-GREGORIAN_EPOCH;e=Math.floor(m/146097);b=mod(m,146097);l=Math.floor(b/36524);a=mod(b,36524);n=Math.floor(a/1461);c=mod(a,1461);f=Math.floor(c/365);h=(e*400)+(l*100)+(n*4)+f;if(!((l==4)||(f==4))){h++}d=g-gregorianToJd(h,1,1);i=((g<gregorianToJd(h,3,1))?0:(isLeapGregorian(h)?1:2));month=Math.floor((((d+i)*12)+373)/367);day=(g-gregorianToJd(h,month,1))+1;return new Array(h,month,day)}function persianToJd(b,e,a){mod=function(g,f){return g-(f*Math.floor(g/f))};var d,c;d=b-((b>=0)?474:473);c=474+mod(d,2820);return a+((e<=7)?((e-1)*31):(((e-1)*30)+6))+Math.floor(((c*682)-110)/2816)+(c-1)*365+Math.floor(d/2820)*1029983+(PERSIAN_EPOCH-1)}function jdToPersian(j){var h,g,i,k,e,a,f,d,c,b;j=Math.floor(j)+0.5;k=j-persianToJd(475,1,1);e=Math.floor(k/1029983);a=mod(k,1029983);if(a===1029982){f=2820}else{d=Math.floor(a/366);c=mod(a,366);f=Math.floor(((2134*d)+(2816*c)+2815)/1028522)+d+1}h=f+(2820*e)+474;if(h<=0){h-=1}b=(j-persianToJd(h,1,1))+1;g=(b<=186)?Math.ceil(b/31):Math.ceil((b-6)/30);i=(j-persianToJd(h,g,1))+1;return new Array(h,g,i)}function calcPersian(d,e,a){var c,b;var b=persianToJd(d,e,a);var c=jdToGregorian(b);return new Array(c[0],c[1]-1,c[2])}function calcGregorian(d,f,a){var c=gregorianToJd(d,f+1,a)+(Math.floor(0+60*(0+60*0)+0.5)/86400),b=jdToPersian(c),e=jwday(c);return new Array(b[0],b[1],b[2],e)}function toPersianDate(c){var b=calcGregorian(c.getFullYear(),c.getMonth(),c.getDate());var a={};a.monthDayNumber=b[2]-1;if(b[3]==6){a.weekDayNumber=1}else{if(b[3]==5){a.weekDayNumber=0}else{if(b[3]==4){a.weekDayNumber=6}else{if(b[3]==3){a.weekDayNumber=5}else{if(b[3]==2){a.weekDayNumber=4}else{if(b[3]==1){a.weekDayNumber=3}else{if(b[3]==0){a.weekDayNumber=2}}}}}}}a.year=b[0];a.month=b[1];a.day=a.weekDayNumber;a.date=b[2];a.hours=c.getHours();a.minutes=((c.getMinutes()<10)?("0"+c.getMinutes()):(c.getMinutes()));a.seconds=c.getSeconds();a.milliseconds=c.getMilliseconds();a.timeZoneOffset=c.getTimezoneOffset();return a}function persianArrayToGregorianDate(c){var b=calcPersian(c[0]?c[0]:0,c[1]?c[1]:1,c[2]?c[2]:1);var a=new Date(b[0],b[1],b[2]);a.setYear(b[0]);a.setMonth(b[1]);a.setDate(b[2]);a.setHours(c[3]?c[3]:0);a.setMinutes(c[4]?c[4]:0);a.setSeconds(c[5]?c[5]:0);return a}function getPersianArrayFromPDate(a){return[a.year,a.month,a.date,a.hours,a.minutes,a.seconds,a.milliseconds]}Duration=function(e){var h=function(l){if(l<0){return Math.ceil(l)}else{return Math.floor(l)}},f=this._data={},g=e.years||e.year||e.y||0,b=e.months||e.month||e.M||0,a=e.weeks||e.w||e.week||0,k=e.days||e.d||e.day||0,i=e.hours||e.hour||e.h||0,d=e.minutes||e.minute||e.m||0,j=e.seconds||e.second||e.s||0,c=e.milliseconds||e.millisecond||e.ms||0;this._milliseconds=c+j*(1000)+d*(60000)+i*(3600000);this._days=k+a*7;this._months=b+g*12;f.milliseconds=c%1000;j+=h(c/1000);f.seconds=j%60;d+=h(j/60);f.minutes=d%60;i+=h(d/60);f.hours=i%24;k+=h(i/24);k+=a*7;f.days=k%30;b+=h(k/30);f.months=b%12;g+=h(b/12);f.years=g;return this};Duration.prototype={weeks:function(){return"Must Implement"},valueOf:function(){return this._milliseconds+this._days*(86400000)+this._months*(2592000000)},humanize:function(a){return"Must Implement"}};var PersianDate=function(b){if(!(this instanceof PersianDate)){return new PersianDate(b)}if(isUndefined(b)){this.gDate=new Date()}else{if(isDate(b)){this.gDate=b}else{if(isArray(b)){var a=b.slice();this.gDate=persianArrayToGregorianDate(a)}else{if(isNumber(b)){this.gDate=new Date(b)}else{if(b instanceof PersianDate){this.gDate=b.gDate}else{if(b.substring(0,6)==="/Date("){this.gDate=new Date(parseInt(b.substr(6)))}}}}}}this.pDate=toPersianDate(this.gDate);return this};PersianDate.prototype={version:"0.1.8a",formatPersian:"_default",_utcMode:false,duration:function(a,e){var d=this.isDuration(a),c=(typeof a==="number"),f=(d?a._data:(c?{}:a)),b;if(c){if(e){f[e]=a}else{f.milliseconds=a}}return new Duration(f)},isDuration:function(a){return a instanceof Duration},humanize:function(){return"Must Implement"},add:function(b,a){var e=this.duration(a,b).valueOf(),c=this.gDate.valueOf()+e;return new PersianDate(c)},subtract:function(b,a){var e=this.duration(a,b).valueOf(),c=this.gDate.valueOf()-e;return new PersianDate(c)},formatNumber:function(){var a;if(this.formatPersian==="_default"){if(window.formatPersian===false){a=false}else{a=true}}else{if(this.formatPersian===true){a=true}else{if(this.formatPersian===false){a=false}else{$.error("Invalid Config 'formatPersian' !!")}}}return a},format:function(e){var a=this,b=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DD?D?D?|ddddd|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|X|LT|ll?l?l?|LL?L?L?)/g,c={year:a.year(),month:a.month(),hour:a.hours(),minute:a.minutes(),second:a.seconds(),date:a.date(),timezone:a.zone(),unix:a.unix()};function d(i){formatToPersian=a.formatNumber();switch(i){case ("a"):if(formatToPersian){return((c.hour>=12)?"ب ظ":"ق ظ")}else{return((c.hour>=12)?"PM":"AM")}case ("H"):if(formatToPersian){return toPersianDigit(c.hour)}else{return c.hour}case ("HH"):if(formatToPersian){return toPersianDigit(leftZeroFill(c.hour,2))}else{return leftZeroFill(c.hour,2)}case ("h"):var l=c.hour%12;if(formatToPersian){return toPersianDigit(l)}else{return l}case ("hh"):var l=c.hour%12;if(formatToPersian){return toPersianDigit(leftZeroFill(l,2))}else{return leftZeroFill(l,2)}case ("m"):if(formatToPersian){return toPersianDigit(c.minute)}else{return c.minute}case ("mm"):if(formatToPersian){return toPersianDigit(leftZeroFill(c.minute,2))}else{return leftZeroFill(c.minute,2)}case ("s"):if(formatToPersian){return toPersianDigit(c.second)}else{return c.second}case ("ss"):if(formatToPersian){return toPersianDigit(leftZeroFill(c.second,2))}else{return leftZeroFill(c.second,2)}case ("D"):if(formatToPersian){return toPersianDigit(leftZeroFill(c.date))}else{return leftZeroFill(c.date)}case ("DD"):if(formatToPersian){return toPersianDigit(leftZeroFill(c.date,2))}else{return leftZeroFill(c.date,2)}case ("DDD"):var k=a.startOf("year");if(formatToPersian){return toPersianDigit(a.diff(k,"days"))}else{return a.diff(k,"days")}case ("DDDD"):var k=a.startOf("year");if(formatToPersian){return leftZeroFill(a.diff(k,"days"),3)}else{return toPersianDigit(leftZeroFill(a.diff(k,"days"),3))}case ("d"):if(formatToPersian){return toPersianDigit(a.pDate.weekDayNumber)}else{return a.pDate.weekDayNumber}case ("ddd"):return weekRange[a.pDate.weekDayNumber].abbr.fa;case ("dddd"):return weekRange[a.pDate.weekDayNumber].name.fa;case ("ddddd"):return persianDaysName[a.pDate.monthDayNumber];case ("w"):var k=a.startOf("year");return parseInt(a.diff(k,"days")/7)+1;case ("ww"):var k=a.startOf("year");return leftZeroFill(parseInt(a.diff(k,"days")/7)+1,2);case ("M"):if(formatToPersian){return toPersianDigit(c.month)}else{return c.month}case ("MM"):if(formatToPersian){return toPersianDigit(leftZeroFill(c.month,2))}else{return leftZeroFill(c.month,2)}case ("MMM"):return monthRange[c.month].abbr.fa;case ("MMMM"):return monthRange[c.month].name.fa;case ("YY"):var m=c.year.toString().split("");if(formatToPersian){return toPersianDigit(m[2]+m[3])}else{return m[2]+m[3]}case ("YYYY"):if(formatToPersian){return toPersianDigit(c.year)}else{return c.year}case ("Z"):var g="+";var f=Math.round(c.timezone/60);var j=c.timezone%60;if(j<0){j*=-1}if(f<0){g="-";f*=-1}var n=g+leftZeroFill(f,2)+":"+leftZeroFill(j,2);if(formatToPersian){return toPersianDigit(n)}else{return n}case ("ZZ"):var g="+";var f=Math.round(c.timezone/60);var j=c.timezone%60;if(j<0){j*=-1}if(f<0){g="-";f*=-1}var n=g+leftZeroFill(f,2)+""+leftZeroFill(j,2);if(formatToPersian){return toPersianDigit(n)}else{return n}case ("X"):return a.unix();case ("LT"):return a.format("h:m a");case ("L"):return a.format("YYYY/MM/DD");case ("l"):return a.format("YYYY/M/D");case ("LL"):return a.format("MMMM DD YYYY");case ("ll"):return a.format("MMM DD YYYY");case ("LLL"):return a.format("MMMM YYYY DD   h:m  a");case ("lll"):return a.format("MMM YYYY DD   h:m  a");case ("LLLL"):return a.format("dddd D MMMM YYYY  h:m  a");case ("llll"):return a.format("ddd D MMM YYYY  h:m  a");default:return c._d}}if(e){return e.replace(b,d)}else{var e="YYYY-MM-DD HH:mm:ss a";return e.replace(b,d)}},from:function(){return"Must Implement"},fromNow:function(){return"Must Implement"},humanizeDuration:function(){return"Must Implement"},_d:function(){return this.gDate._d},diff:function(h,c,k){var j=new PersianDate(this),a=h,e=0,i=j.gDate-a.gDate-e,g=j.year()-a.year(),f=j.month()-a.month(),d=(j.date()-a.date())*-1,b;if(c==="months"||c==="month"){b=g*12+f+d/30}else{if(c==="years"||c==="year"){b=g+(f+d/30)/12}else{b=c==="seconds"||c==="second"?i/1000:c==="minutes"||c==="minute"?i/60000:c==="hours"||c==="hour"?i/3600000:c==="days"||c==="day"?i/86400000:c==="weeks"||c==="week"?i/604800000:i}}if(b<0){b*-1}return k?b:Math.round(b)},startOf:function(b){switch(b){case"years":case"year":return new PersianDate([this.year(),1,1]);case"months":case"month":return new PersianDate([this.year(),this.month(),1]);case"days":case"day":return new PersianDate([this.year(),this.month(),this.date(),0,0,0]);case"hours":case"hour":return new PersianDate([this.year(),this.month(),this.date(),this.hours(),0,0]);case"minutes":case"minute":return new PersianDate([this.year(),this.month(),this.date(),this.hours(),this.minutes(),0]);case"seconds":case"second":return new PersianDate([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":var a=this.pDate.weekDayNumber;if(a===0){return new PersianDate([this.year(),this.month(),this.date()])}else{return new PersianDate([this.year(),this.month(),this.date()]).subtract("days",a)}default:return this}},endOf:function(b){switch(b){case"years":case"year":var d=this.isLeapYear()?30:29;return new PersianDate([this.year(),12,d,23,59,59]);case"months":case"month":var c=this.daysInMonth(this.year(),this.month());return new PersianDate([this.year(),this.month(),c,23,59,59]);case"days":case"day":return new PersianDate([this.year(),this.month(),this.date(),23,59,59]);case"hours":case"hour":return new PersianDate([this.year(),this.month(),this.date(),this.hours(),59,59]);case"minutes":case"minute":return new PersianDate([this.year(),this.month(),this.date(),this.hours(),this.minutes(),59]);case"seconds":case"second":return new PersianDate([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":var a=this.pDate.weekDayNumber;if(a===6){a=7}else{a=6-a}return new PersianDate([this.year(),this.month(),this.date()]).add("days",a);default:return this}},sod:function(){return this.startOf("day")},eod:function(){return this.endOf("day")},zone:function(){return this.pDate.timeZoneOffset},local:function(){if(!this._utcMode){return this}else{var a=this.pDate.timeZoneOffset*60*1000;if(this.pDate.timeZoneOffset<0){var b=this.valueOf()-a}else{var b=this.valueOf()+a}this.gDate=new Date(b);this._updatePDate();this._utcMode=false;return this}},utc:function(b){if(b){return new persianDate(b).utc()}if(this._utcMode){return this}else{var a=this.pDate.timeZoneOffset*60*1000;if(this.pDate.timeZoneOffset<0){var c=this.valueOf()+a}else{var c=this.valueOf()-a}this.gDate=new Date(c);this._updatePDate();this._utcMode=true;return this}},isUtc:function(){return this._utcMode},isDST:function(){var a=false;if(this.month()>=1&&this.month()<=6){a=true;switch(this.month()){case (1):if(this.date()<2){a=false}break;case (6):if(this.date()>30){a=false}break}}return a},isLeapYear:function(){return isLeapPersian(this.year())},daysInMonth:function(b,d){var a=b?b:this.year();var c=d?d:this.month();if(c<1||c>12){return 0}if(c<7){return 31}if(c<12){return 30}if(isLeapPersian(a)){return 30}return 29},toDate:function(){return this.gDate},toArray:function(){return[this.year(),this.month(),this.day(),this.hour(),this.minute(),this.second(),this.millisecond()]},_valueOf:function(){return this.gDate.valueOf()},unix:function(a){if(a){return new persianDate(a*1000)}else{var b=this.gDate.valueOf().toString();output=b.substring(0,b.length-3)}return parseInt(output)},isPersianDate:function(a){return a instanceof PersianDate},millisecond:function(a){return this.milliseconds(a)},milliseconds:function(a){if(a){this.gDate.setMilliseconds(a);this._updatePDate();return this}else{return this.pDate.milliseconds}},second:function(a){return this.seconds(a)},seconds:function(a){if(a|a===0){this.gDate.setSeconds(a);this._updatePDate();return this}else{return this.pDate.seconds}},minute:function(a){return this.minutes(a)},minutes:function(a){if(a||a===0){this.gDate.setMinutes(a);this._updatePDate();return this}else{return this.pDate.minutes}},hour:function(a){return this.hours(a)},hours:function(a){if(a|a===0){this.gDate.setHours(a);this._updatePDate();return this}else{return this.pDate.hours}},dates:function(a){return this.date(a)},date:function(b){if(b|b==0){var a=getPersianArrayFromPDate(this.pDate);a[2]=b;this.gDate=persianArrayToGregorianDate(a);this._updatePDate();return this}else{return this.pDate.date}},days:function(){return this.day()},day:function(){return this.pDate.day},month:function(b){if(b|b===0){var a=getPersianArrayFromPDate(this.pDate);a[1]=b;this.gDate=persianArrayToGregorianDate(a);this._updatePDate();return this}else{return this.pDate.month}},years:function(a){return this.year(a)},year:function(b){if(b|b===0){var a=getPersianArrayFromPDate(this.pDate);a[0]=b;this.gDate=persianArrayToGregorianDate(a);this._updatePDate();return this}else{return this.pDate.year}},getFirstWeekDayOfMonth:function(b,d){var c=calcPersian(b,d,1),a=calcGregorian(c[0],c[1],c[2]);if(a[3]+2===8){return 1}else{if(a[3]+2===7){return 7}else{return a[3]+2}}},clone:function(){var a=this;return new PersianDate(a.gDate)},_updatePDate:function(){this.pDate=toPersianDate(this.gDate)},valueOf:function(){return this._valueOf()}};persianDate=PersianDate;pDate=PersianDate;persianDate.unix=persianDate.prototype.unix;persianDate.utc=persianDate.prototype.utc;