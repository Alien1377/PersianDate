/*
** persian-date - v0.2.0
** Reza Babakhani <babakhani.reza@gmail.com>
** http://babakhani.github.io/PersianWebToolkit/docs/persian-date/
** Under WTFPL license 
*/

!function(){"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a){return a.toString().toPersianDigit()}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return"string"==typeof a}function e(a){return"number"==typeof a}function f(a){return a instanceof Date}function g(a){return void 0===a}function h(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function i(){var a=void 0,b=void 0;return d(arguments[0])?(a=arguments[0],b=arguments[1]):(b=arguments[0],a=arguments[1]),n.year.indexOf(a)>-1?a="year":n.month.indexOf(a)>-1?a="month":n.day.indexOf(a)>-1?a="day":n.hour.indexOf(a)>-1?a="hour":n.minute.indexOf(a)>-1?a="minute":n.second.indexOf(a)>-1&&(a="second"),{unit:a,value:b}}function j(a){return a<0?Math.ceil(a):Math.floor(a)}function k(a,b){return a-b*Math.floor(a/b)}function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(){function b(){a(this,b)}return l(b,[{key:"jwday",value:function(a){return function(a,b){return a-b*Math.floor(a/b)}(Math.floor(a+1.5),7)}},{key:"isLeapGregorian",value:function(a){return a%4==0&&!(a%100==0&&a%400!=0)}},{key:"isLeapPersian",value:function(a){return 682*((a-(a>0?474:473))%2820+474+38)%2816<682}},{key:"gregorianToJd",value:function(a,b,c){return o-1+365*(a-1)+Math.floor((a-1)/4)+-Math.floor((a-1)/100)+Math.floor((a-1)/400)+Math.floor((367*b-362)/12+(b<=2?0:this.isLeapGregorian(a)?-1:-2)+c)}},{key:"jdToGregorian",value:function(a){var b=Math.floor(a-.5)+.5,c=b-o,d=Math.floor(c/146097),e=k(c,146097),f=Math.floor(e/36524),g=k(e,36524),h=Math.floor(g/1461),i=k(g,1461),j=Math.floor(i/365),l=400*d+100*f+4*h+j;4!=f&&4!=j&&l++;var m=b-this.gregorianToJd(l,1,1),n=b<this.gregorianToJd(l,3,1)?0:this.isLeapGregorian(l)?1:2,p=Math.floor((12*(m+n)+373)/367),q=b-this.gregorianToJd(l,p,1)+1;return new Array(l,p,q)}},{key:"persianToJd",value:function(a,b,c){var d=void 0,e=void 0;return d=a-(a>=0?474:473),e=474+k(d,2820),c+(b<=7?31*(b-1):30*(b-1)+6)+Math.floor((682*e-110)/2816)+365*(e-1)+1029983*Math.floor(d/2820)+(p-1)}},{key:"jdToPersian",value:function(a){var b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,l=void 0;return a=Math.floor(a)+.5,e=a-this.persianToJd(475,1,1),f=Math.floor(e/1029983),g=k(e,1029983),1029982===g?h=2820:(i=Math.floor(g/366),j=k(g,366),h=Math.floor((2134*i+2816*j+2815)/1028522)+i+1),b=h+2820*f+474,b<=0&&(b-=1),l=a-this.persianToJd(b,1,1)+1,c=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),d=a-this.persianToJd(b,c,1)+1,new Array(b,c,d)}},{key:"calcPersian",value:function(a,b,c){var d=this.persianToJd(a,b,c),e=this.jdToGregorian(d);return new Array(e[0],e[1]-1,e[2])}},{key:"calcGregorian",value:function(a,b,c){var d=this.gregorianToJd(a,b+1,c)+Math.floor(.5)/86400,e=this.jdToPersian(d),f=this.jwday(d);return new Array(e[0],e[1],e[2],f)}},{key:"toPersianDate",value:function(a){var b=this.calcGregorian(a.getFullYear(),a.getMonth(),a.getDate()),c={};return c.monthDayNumber=b[2]-1,6==b[3]?c.weekDayNumber=1:5==b[3]?c.weekDayNumber=0:4==b[3]?c.weekDayNumber=6:3==b[3]?c.weekDayNumber=5:2==b[3]?c.weekDayNumber=4:1==b[3]?c.weekDayNumber=3:0==b[3]&&(c.weekDayNumber=2),c.year=b[0],c.month=b[1],c.day=c.weekDayNumber,c.date=b[2],c.hours=a.getHours(),c.minutes=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),c.seconds=a.getSeconds(),c.milliseconds=a.getMilliseconds(),c.timeZoneOffset=a.getTimezoneOffset(),c}},{key:"persianArrayToGregorianDate",value:function(a){var b=this.calcPersian(a[0]?a[0]:0,a[1]?a[1]:1,a[2]?a[2]:1),c=new Date(b[0],b[1],b[2]);return c.setYear(b[0]),c.setMonth(b[1]),c.setDate(b[2]),c.setHours(a[3]?a[3]:0),c.setMinutes(a[4]?a[4]:0),c.setSeconds(a[5]?a[5]:0),c.setMilliseconds(a[6]?a[6]:0),c}},{key:"getPersianArrayFromPDate",value:function(a){return[a.year,a.month,a.date,a.hours,a.minutes,a.seconds,a.milliseconds]}}]),b}(),n={year:["y","years","year"],month:["M","months","month"],day:["d","days","day"],hour:["h","hours","hour"],minute:["m","minutes","minute"],second:["s","second","seconds"],millisecond:["ms","milliseconds","millisecond"],week:["w","","weeks","week"]},o=1721425.5,p=1948320.5,q={1:{name:{fa:"فروردین"},abbr:{fa:"فرو"}},2:{name:{fa:"اردیبهشت"},abbr:{fa:"ارد"}},3:{name:{fa:"خرداد"},abbr:{fa:"خرد"}},4:{name:{fa:"تیر"},abbr:{fa:"تیر"}},5:{name:{fa:"مرداد"},abbr:{fa:"مرد"}},6:{name:{fa:"شهریور"},abbr:{fa:"شهر"}},7:{name:{fa:"مهر"},abbr:{fa:"مهر"}},8:{name:{fa:"آبان"},abbr:{fa:"آبا"}},9:{name:{fa:"آذر"},abbr:{fa:"آذر"}},10:{name:{fa:"دی"},abbr:{fa:"دی"}},11:{name:{fa:"بهمن"},abbr:{fa:"بهم"}},12:{name:{fa:"اسفند"},abbr:{fa:"اسف"}}},r={1:{name:{fa:"شنبه"},abbr:{fa:"ش"}},2:{name:{fa:"یکشنبه"},abbr:{fa:"ی"}},3:{name:{fa:"دوشنبه"},abbr:{fa:"د"}},4:{name:{fa:"سه شنبه"},abbr:{fa:"س"}},5:{name:{fa:"چهار شنبه"},abbr:{fa:"چ"}},6:{name:{fa:"پنج شنبه"},abbr:{fa:"پ"}},0:{name:{fa:"جمعه"},abbr:{fa:"ج"}}},s=["اورمزد","بهمن","اوردیبهشت","شهریور","سپندارمذ","خورداد","امرداد","دی به آذز","آذز","آبان","خورشید","ماه","تیر","گوش","دی به مهر","مهر","سروش","رشن","فروردین","بهرام","رام","باد","دی به دین","دین","ارد","اشتاد","آسمان","زامیاد","مانتره سپند","انارام","زیادی"],t=function b(c,d){a(this,b);var e={},f=this._data={},g=0,h=i(c,d);e[h.unit]=h.value,g=e.milliseconds||e.millisecond||e.ms||0;var k=e.years||e.year||e.y||0,l=e.months||e.month||e.M||0,m=e.weeks||e.w||e.week||0,n=e.days||e.d||e.day||0,o=e.hours||e.hour||e.h||0,p=e.minutes||e.minute||e.m||0,q=e.seconds||e.second||e.s||0;return this._milliseconds=g+1e3*q+6e4*p+36e5*o,this._days=n+7*m,this._months=l+12*k,f.milliseconds=g%1e3,q+=g/1e3,f.seconds=q%60,p+=j(q/60),f.minutes=p%60,o+=j(p/60),f.hours=o%24,n+=j(o/24),n+=7*m,f.days=n%30,l+=j(n/30),f.months=l%12,k+=j(l/12),f.years=k,this};t.prototype={valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months}},String.prototype.toPersianDigit=function(a){return this.replace(/\d+/g,function(b){var c=[],d=[],e=void 0,f=void 0;for(e=0;e<b.length;e+=1)c.push(b.charCodeAt(e));for(f=0;f<c.length;f+=1)d.push(String.fromCharCode(c[f]+(a&&a===!0?1584:1728)));return d.join("")})};var l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function(){function d(b){if(a(this,d),this.algorithms=new m,g(b))this.gDate=new Date;else if(f(b))this.gDate=b;else if(c(b)){var h=b.slice();this.gDate=this.algorithms.persianArrayToGregorianDate(h)}else e(b)?this.gDate=new Date(b):b instanceof d?this.gDate=b.gDate:"/Date("===b.substring(0,6)&&(this.gDate=new Date(parseInt(b.substr(6))));return this.pDate=this.algorithms.toPersianDate(this.gDate),this.version="0.2.0",this.formatPersian="_default",this._utcMode=!1,this}return l(d,[{key:"duration",value:function(a,b){return new t(a,b)}},{key:"isDuration",value:function(a){return a instanceof t}},{key:"add",value:function(a,b){var c=new t(a,b)._data;if(c.years>0){var e=this.year()+c.years;this.year(e)}if(c.months>0){var f=this.month()+c.months;this.month(f)}if(c.days>0){var g=this.date()+c.days;this.date(g)}if(c.hours>0){var h=this.hour()+c.hours;this.hour(h)}if(c.minutes>0){var i=this.minute()+c.minutes;this.minute(i)}if(c.seconds>0){var j=this.second()+c.seconds;this.second(j)}if(c.milliseconds>0){var k=this.milliseconds()+c.milliseconds;this.milliseconds(k)}return new d(this.valueOf())}},{key:"subtract",value:function(a,b){var c=new t(a,b)._data;if(c.years>0){var e=this.year()-c.years;this.year(e)}if(c.months>0){var f=this.month()-c.months;this.month(f)}if(c.days>0){var g=this.date()-c.days;this.date(g)}if(c.hours>0){var h=this.hour()-c.hours;this.hour(h)}if(c.minutes>0){var i=this.minute()-c.minutes;this.minute(i)}if(c.seconds>0){var j=this.second()-c.seconds;this.second(j)}if(c.milliseconds>0){var k=this.milliseconds()-c.milliseconds;this.milliseconds(k)}return new d(this.valueOf())}},{key:"formatNumber",value:function(){var a=void 0,b=this;return"_default"===this.formatPersian?a="undefined"!=typeof module&&void 0!==module.exports?b.formatPersian!==!1:window.formatPersian!==!1:this.formatPersian===!0?a=!0:this.formatPersian===!1?a=!1:Error("Invalid Config 'formatPersian' !!"),a}},{key:"format",value:function(a){function c(a){switch(a){case"a":return g?f.hour>=12?"ب ظ":"ق ظ":f.hour>=12?"PM":"AM";case"H":return i(f.hour);case"HH":return i(h(f.hour,2));case"h":return i(f.hour%12);case"hh":return i(h(f.hour%12,2));case"m":case"mm":return i(h(f.minute,2));case"s":return i(f.second);case"ss":return i(h(f.second,2));case"D":return i(h(f.date));case"DD":return i(h(f.date,2));case"DDD":var b=d.startOf("year");return i(h(d.diff(b,"days"),3));case"DDDD":var c=d.startOf("year");return i(h(d.diff(c,"days"),3));case"d":return i(d.pDate.weekDayNumber);case"ddd":return r[d.pDate.weekDayNumber].abbr.fa;case"dddd":return r[d.pDate.weekDayNumber].name.fa;case"ddddd":return s[d.pDate.monthDayNumber];case"w":var e=d.startOf("year"),j=parseInt(d.diff(e,"days")/7)+1;return i(j);case"ww":var k=d.startOf("year"),l=h(parseInt(d.diff(k,"days")/7)+1,2);return i(l);case"M":return i(f.month);case"MM":return i(h(f.month,2));case"MMM":return q[f.month].abbr.fa;case"MMMM":return q[f.month].name.fa;case"YY":var m=f.year.toString().split("");return i(m[2]+m[3]);case"YYYY":return i(f.year);case"Z":var n="+",o=Math.round(f.timezone/60),p=f.timezone%60;p<0&&(p*=-1),o<0&&(n="-",o*=-1);var t=n+h(o,2)+":"+h(p,2);return i(t);case"ZZ":var u="+",v=Math.round(f.timezone/60),w=f.timezone%60;w<0&&(w*=-1),v<0&&(u="-",v*=-1);var x=u+h(v,2)+""+h(w,2);return i(x);case"X":return d.unix();case"LT":return d.format("h:m a");case"L":return d.format("YYYY/MM/DD");case"l":return d.format("YYYY/M/D");case"LL":return d.format("MMMM DD YYYY");case"ll":return d.format("MMM DD YYYY");case"LLL":return d.format("MMMM YYYY DD   h:m  a");case"lll":return d.format("MMM YYYY DD   h:m  a");case"LLLL":return d.format("dddd D MMMM YYYY  h:m  a");case"llll":return d.format("ddd D MMM YYYY  h:m  a")}}var d=this,e=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DD?D?D?|ddddd|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|X|LT|ll?l?l?|LL?L?L?)/g,f={year:d.year(),month:d.month(),hour:d.hours(),minute:d.minutes(),second:d.seconds(),date:d.date(),timezone:d.zone(),unix:d.unix()},g=d.formatNumber(),i=function(a){return g?b(a):a};return a?a.replace(e,c):"YYYY-MM-DD HH:mm:ss a".replace(e,c)}},{key:"diff",value:function(a,b,c){var d=this,e=a,f=d.gDate-e.gDate-0,g=d.year()-e.year(),h=d.month()-e.month(),i=(d.date()-e.date())*-1,j=void 0;return j="months"===b||"month"===b?12*g+h+i/30:"years"===b||"year"===b?g+(h+i/30)/12:"seconds"===b||"second"===b?f/1e3:"minutes"===b||"minute"===b?f/6e4:"hours"===b||"hour"===b?f/36e5:"days"===b||"day"===b?f/864e5:"weeks"===b||"week"===b?f/6048e5:f,c?j:Math.round(j)}},{key:"startOf",value:function(a){switch(a){case"years":case"year":return new d([this.year(),1,1]);case"months":case"month":return new d([this.year(),this.month(),1]);case"days":case"day":return new d([this.year(),this.month(),this.date(),0,0,0]);case"hours":case"hour":return new d([this.year(),this.month(),this.date(),this.hours(),0,0]);case"minutes":case"minute":return new d([this.year(),this.month(),this.date(),this.hours(),this.minutes(),0]);case"seconds":case"second":return new d([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":var b=this.pDate.weekDayNumber;return 0===b?new d([this.year(),this.month(),this.date()]):new d([this.year(),this.month(),this.date()]).subtract("days",b);default:return this}}},{key:"endOf",value:function(a){switch(a){case"years":case"year":var b=this.isLeapYear()?30:29;return new d([this.year(),12,b,23,59,59]);case"months":case"month":var c=this.daysInMonth(this.year(),this.month());return new d([this.year(),this.month(),c,23,59,59]);case"days":case"day":return new d([this.year(),this.month(),this.date(),23,59,59]);case"hours":case"hour":return new d([this.year(),this.month(),this.date(),this.hours(),59,59]);case"minutes":case"minute":return new d([this.year(),this.month(),this.date(),this.hours(),this.minutes(),59]);case"seconds":case"second":return new d([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":var e=this.pDate.weekDayNumber;return e=6===e?7:6-e,new d([this.year(),this.month(),this.date()]).add("days",e);default:return this}}},{key:"sod",value:function(){return this.startOf("day")}},{key:"eod",value:function(){return this.endOf("day")}},{key:"zone",value:function(){return this.pDate.timeZoneOffset}},{key:"local",value:function(){var a=void 0;if(this._utcMode){var b=60*this.pDate.timeZoneOffset*1e3;return a=this.pDate.timeZoneOffset<0?this.valueOf()-b:this.valueOf()+b,this.gDate=new Date(a),this._updatePDate(),this._utcMode=!1,this}return this}},{key:"utc",value:function(a){var b=void 0;if(a)return new d(a).utc();if(this._utcMode)return this;var c=60*this.pDate.timeZoneOffset*1e3;return b=this.pDate.timeZoneOffset<0?this.valueOf()+c:this.valueOf()-c,this.gDate=new Date(b),this._updatePDate(),this._utcMode=!0,this}},{key:"isUtc",value:function(){return this._utcMode}},{key:"isDST",value:function(){var a=this.month(),b=this.date();return!(a<7)&&(7==a&&b>=2||a>=7||void 0)}},{key:"isLeapYear",value:function(){return this.algorithms.isLeapPersian(this.year())}},{key:"daysInMonth",value:function(a,b){var c=a||this.year(),d=b||this.month();return d<1||d>12?0:d<7?31:d<12?30:this.algorithms.isLeapPersian(c)?30:29}},{key:"toDate",value:function(){return this.gDate}},{key:"toArray",value:function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]}},{key:"_valueOf",value:function(){return this.gDate.valueOf()}},{key:"unix",value:function(a){var b=void 0;if(a)return new d(1e3*a);var c=this.gDate.valueOf().toString();return b=c.substring(0,c.length-3),parseInt(b)}},{key:"isPersianDate",value:function(a){return a instanceof d}},{key:"millisecond",value:function(a){return this.milliseconds(a)}},{key:"milliseconds",value:function(a){return a?(this.gDate.setMilliseconds(a),this._updatePDate(),this):this.pDate.milliseconds}},{key:"second",value:function(a){return this.seconds(a)}},{key:"seconds",value:function(a){return a|0===a?(this.gDate.setSeconds(a),this._updatePDate(),this):this.pDate.seconds}},{key:"minute",value:function(a){return this.minutes(a)}},{key:"minutes",value:function(a){return a||0===a?(this.gDate.setMinutes(a),this._updatePDate(),this):parseInt(this.pDate.minutes)}},{key:"hour",value:function(a){return this.hours(a)}},{key:"hours",value:function(a){return a|0===a?(this.gDate.setHours(a),this._updatePDate(),this):this.pDate.hours}},{key:"dates",value:function(a){return this.date(a)}},{key:"date",value:function(a){if(a||0===a){var b=this.algorithms.getPersianArrayFromPDate(this.pDate);return b[2]=a,this.gDate=this.algorithms.persianArrayToGregorianDate(b),this._updatePDate(),this}return this.pDate.date}},{key:"days",value:function(){return this.day()}},{key:"day",value:function(){return this.pDate.day}},{key:"month",value:function(a){if(a|0===a){var b=this.algorithms.getPersianArrayFromPDate(this.pDate);return b[1]=a,this.gDate=this.algorithms.persianArrayToGregorianDate(b),this._updatePDate(),this}return this.pDate.month}},{key:"years",value:function(a){return this.year(a)}},{key:"year",value:function(a){if(a|0===a){var b=this.algorithms.getPersianArrayFromPDate(this.pDate);return b[0]=a,this.gDate=this.algorithms.persianArrayToGregorianDate(b),this._updatePDate(),this}return this.pDate.year}},{key:"getFirstWeekDayOfMonth",value:function(a,b){var c=this.algorithms.calcPersian(a,b,1),d=this.algorithms.calcGregorian(c[0],c[1],c[2]);return d[3]+2===8?1:d[3]+2===7?7:d[3]+2}},{key:"clone",value:function(){return new d(this.gDate)}},{key:"_updatePDate",value:function(){this.pDate=this.algorithms.toPersianDate(this.gDate)}},{key:"valueOf",value:function(){return this._valueOf()}}],[{key:"_utc",value:function(a){return a?new d(a).utc():(new d).utc()}},{key:"_unix",value:function(a){return a?new d(1e3*a).unix():(new d).unix()}}]),d}();!function(){if("undefined"!=typeof module&&void 0!==module.exports){var a=u;a.unix=u._unix,a.utc=u._utc,module.exports={pDate:a,Duration:t}}else if("function"==typeof define&&define.amd)define([],function(){return b});else{var b=function(a){return new u(a)};b.unix=u._unix,b.utc=u._utc,window.pDate=window.persianDate=b,window.Duration=t}}()}();
//# sourceMappingURL=persian-date.min.js.map